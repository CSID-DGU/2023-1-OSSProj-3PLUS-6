{"ast":null,"code":"import _toConsumableArray from\"/Users/seoyoung/2023-1-OSSProj-3PLUS-6/Project/react-web/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/seoyoung/2023-1-OSSProj-3PLUS-6/Project/react-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useDrop}from\"react-dnd\";import{Table,Modal}from\"antd\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DroppableTable=function DroppableTable(_ref){var dataSource=_ref.dataSource,columns=_ref.columns,setAddedData=_ref.setAddedData,onRowClick=_ref.onRowClick;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setIsModalVisible=_useState2[1];var _useDrop=useDrop(function(){return{accept:\"COURSE\",drop:function drop(item,monitor){setAddedData(function(prevData){if(!prevData.some(function(data){return data.교과목명===item.course.교과목명&&data.강의실===item.course.강의실;})){// 만약 prevData에 item.course가 없다면,\n//서버 포스트 요청\naxios.post(\"/application/add\",item.course).then(function(res){console.log(res);}).catch(function(err){console.error(err);});return[].concat(_toConsumableArray(prevData),[item.course]);// item.course를 추가합니다.\n}else{setIsModalVisible(true);// 만약 이미 수강신청된 강의라면 모달을 띄웁니다.\n}return prevData;// 그렇지 않다면, prevData를 그대로 반환합니다.\n});}};}),_useDrop2=_slicedToArray(_useDrop,2),dropRef=_useDrop2[1];var handleOk=function handleOk(){// OK 버튼을 클릭했을 때의 처리\nsetIsModalVisible(false);};var handleCancel=function handleCancel(){// 취소 버튼을 클릭했을 때의 처리\nsetIsModalVisible(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Table,{ref:dropRef,dataSource:dataSource,columns:columns,onRow:function onRow(record){return{onClick:function onClick(){return onRowClick(record);}};}}),/*#__PURE__*/_jsx(Modal,{title:\"\\uACBD\\uACE0\",visible:isModalVisible,onOk:handleOk,onCancel:handleCancel,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC774\\uBBF8 \\uC218\\uAC15 \\uC2E0\\uCCAD\\uB41C \\uAC15\\uC758\\uC785\\uB2C8\\uB2E4.\"})})]});};export default DroppableTable;","map":{"version":3,"names":["React","useState","useDrop","Table","Modal","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DroppableTable","_ref","dataSource","columns","setAddedData","onRowClick","_useState","_useState2","_slicedToArray","isModalVisible","setIsModalVisible","_useDrop","accept","drop","item","monitor","prevData","some","data","교과목명","course","강의실","post","then","res","console","log","catch","err","error","concat","_toConsumableArray","_useDrop2","dropRef","handleOk","handleCancel","children","ref","onRow","record","onClick","title","visible","onOk","onCancel"],"sources":["/Users/seoyoung/2023-1-OSSProj-3PLUS-6/Project/react-web/src/components/DroppableTable.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { Table, Modal } from \"antd\";\nimport axios from \"axios\";\n\nconst DroppableTable = ({ dataSource, columns, setAddedData, onRowClick }) => {\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const [, dropRef] = useDrop(() => ({\n    accept: \"COURSE\",\n    drop: (item, monitor) => {\n      setAddedData((prevData) => {\n        if (\n          !prevData.some(\n            (data) =>\n              data.교과목명 === item.course.교과목명 &&\n              data.강의실 === item.course.강의실\n          )\n        ) {\n          // 만약 prevData에 item.course가 없다면,\n          //서버 포스트 요청\n          axios\n            .post(\"/application/add\", item.course)\n            .then((res) => {\n              console.log(res);\n            })\n            .catch((err) => {\n              console.error(err);\n            });\n          return [...prevData, item.course]; // item.course를 추가합니다.\n        } else {\n          setIsModalVisible(true); // 만약 이미 수강신청된 강의라면 모달을 띄웁니다.\n        }\n        return prevData; // 그렇지 않다면, prevData를 그대로 반환합니다.\n      });\n    },\n  }));\n\n  const handleOk = () => {\n    // OK 버튼을 클릭했을 때의 처리\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    // 취소 버튼을 클릭했을 때의 처리\n    setIsModalVisible(false);\n  };\n\n  return (\n    <>\n      <Table\n        ref={dropRef}\n        dataSource={dataSource}\n        columns={columns}\n        onRow={(record) => ({\n          onClick: () => onRowClick(record),\n        })}\n      />\n      <Modal\n        title=\"경고\"\n        visible={isModalVisible}\n        onOk={handleOk}\n        onCancel={handleCancel}\n      >\n        <p>이미 수강 신청된 강의입니다.</p>\n      </Modal>\n    </>\n  );\n};\n\nexport default DroppableTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}